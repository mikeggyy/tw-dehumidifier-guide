import{m as p,d as L,c as u,b as c,o as i,n as x,f as h,e as s,g as j,j as g,t as d,G as B,h as m,i as C,J as P,F as N,r as S,k as A}from"./BNntdZSI.js";import{a as D,_ as E,E as G}from"./B-JPyR6b.js";import{C as Q}from"./QL5mt6Ur.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=p("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=p("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=p("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=p("GitCompareIcon",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=p("HeartIcon",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=p("SearchXIcon",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=p("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=p("SlidersHorizontalIcon",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=p("TrophyIcon",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=p("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),W={class:"relative aspect-square bg-gray-50"},O=["src","alt"],Z={key:1,class:"absolute top-3 right-12 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full"},J={key:2,class:"absolute bottom-3 left-3 right-3 bg-blue-600 text-white text-xs font-medium px-3 py-1.5 rounded-full flex items-center justify-center gap-1"},R={class:"p-4"},K=["innerHTML"],Y=["innerHTML"],ee={class:"mt-2 mb-3"},te={key:0,class:"mb-1"},re=s("span",{class:"text-xs text-gray-500"},"市售價 ",-1),oe={class:"text-sm text-gray-400 line-through"},se=s("span",{class:"text-xs text-gray-500"},"促銷價 ",-1),ne={class:"text-2xl font-bold text-blue-600"},ae=["href"],Ae=L({__name:"ProductCard",props:{product:{},showCompare:{type:Boolean,default:!1},isInCompare:{type:Boolean,default:!1},isFavorite:{type:Boolean,default:!1},searchQuery:{default:""},categorySlug:{default:"dehumidifier"}},emits:["toggleCompare","toggleFavorite"],setup(M,{emit:I}){const a=M,b=I,{getProductSlug:k}=D(),_=u(()=>k(a.product)),v=u(()=>`/${a.categorySlug}/${_.value}`),w=t=>new Intl.NumberFormat("zh-TW").format(t),T=u(()=>{const t=["","一級能效","二級能效","三級能效","四級能效","五級能效"],n=a.product.energy_efficiency;return n==null?"":t[n]||""}),H=u(()=>{const t={1:"bg-green-500",2:"bg-lime-500",3:"bg-yellow-500",4:"bg-orange-500",5:"bg-red-500"},n=a.product.energy_efficiency;return n==null?"bg-gray-500":t[n]||"bg-gray-500"}),V=u(()=>{const t=a.product.original_price,n=a.product.price;if(!t||t<=n)return null;const y=Math.round((1-n/t)*100);return y>=5?y:null}),f=u(()=>{const t=a.product.original_price;return!t||t<=a.product.price?null:t-a.product.price}),z=u(()=>f.value&&f.value>=500?`現省 $${w(f.value)}`:"查看優惠價");u(()=>{const t=a.product.daily_capacity??0;return t===0?1/0:a.product.price/t});const $=u(()=>{const t=a.product.brand;if(t&&t!=="Other")return t;const n=a.product.name.match(/【([^】]+)】/);return n?n[1]:""}),e=t=>{if(!a.searchQuery||a.searchQuery.length<2)return t;const n=a.searchQuery.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),y=new RegExp(`(${n})`,"gi");return t.replace(y,'<mark class="bg-yellow-200 text-gray-900 px-0.5 rounded">$1</mark>')},r=u(()=>e(a.product.name)),o=u(()=>e($.value));return(t,n)=>{const y=E;return i(),c("div",{class:x(["bg-white rounded-xl shadow-sm border overflow-hidden hover:shadow-md transition-all duration-200",t.isInCompare?"border-blue-500 ring-2 ring-blue-200":"border-gray-100"])},[h(y,{to:v.value,class:"block"},{default:j(()=>[s("div",W,[s("img",{src:t.product.image_url,alt:`${t.product.brand} ${t.product.model} 除濕機`,class:"w-full h-full object-cover",loading:"lazy"},null,8,O),t.product.energy_efficiency?(i(),c("span",{key:0,class:x([H.value,"absolute top-3 left-3 text-white text-xs font-medium px-2 py-1 rounded-full"])},d(T.value),3)):g("",!0),V.value?(i(),c("span",Z," -"+d(V.value)+"% ",1)):g("",!0),s("button",{class:x(["absolute top-3 right-3 p-1.5 rounded-full bg-white/90 shadow-sm hover:bg-white transition-all duration-200",t.isFavorite?"text-red-500":"text-gray-400 hover:text-red-400"]),onClick:n[0]||(n[0]=B(l=>b("toggleFavorite"),["prevent"]))},[h(m(U),{size:18,fill:t.isFavorite?"currentColor":"none"},null,8,["fill"])],2),t.isInCompare?(i(),c("div",J,[h(m(Q),{size:14}),C(" 已加入比較 ")])):g("",!0)])]),_:1},8,["to"]),s("div",R,[h(y,{to:v.value,class:"block group"},{default:j(()=>[$.value?(i(),c("p",{key:0,class:"text-sm text-gray-500 mb-1",innerHTML:o.value},null,8,K)):g("",!0),s("h3",{class:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors line-clamp-2 min-h-[48px]",innerHTML:r.value},null,8,Y)]),_:1},8,["to"]),s("div",ee,[t.product.original_price&&t.product.original_price>t.product.price?(i(),c("div",te,[re,s("span",oe,"NT$ "+d(w(t.product.original_price)),1)])):g("",!0),s("div",null,[se,s("span",ne,"NT$ "+d(w(t.product.price)),1)])]),s("a",{href:t.product.affiliate_url,target:"_blank",rel:"noopener noreferrer nofollow",class:x(["mt-3 block w-full text-center py-3 px-4 font-medium rounded-lg transition-all duration-200 shadow-sm hover:shadow",f.value&&f.value>=500?"bg-gradient-to-r from-red-600 to-orange-500 hover:from-red-700 hover:to-orange-600 text-white":"bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white"]),onClick:n[1]||(n[1]=B(()=>{},["stop"]))},d(z.value),11,ae),t.showCompare?(i(),c("button",{key:0,class:x(["mt-2 w-full flex items-center justify-center gap-2 py-2 px-4 text-sm font-medium rounded-lg border-2 transition-all duration-200",t.isInCompare?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 bg-white text-gray-600 hover:border-blue-300 hover:text-blue-600"]),onClick:n[2]||(n[2]=l=>b("toggleCompare"))},[h(m(X),{size:16}),C(" "+d(t.isInCompare?"取消比較":"加入比較"),1)],2)):g("",!0)])],2)}}}),le={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden animate-pulse"},ie=P('<div class="aspect-square bg-gray-200"></div><div class="p-4"><div class="h-4 bg-gray-200 rounded w-1/4 mb-2"></div><div class="h-5 bg-gray-200 rounded w-full mb-1"></div><div class="h-5 bg-gray-200 rounded w-3/4 mb-4"></div><div class="h-4 bg-gray-200 rounded w-1/3 mb-2"></div><div class="h-8 bg-gray-200 rounded w-1/2 mb-4"></div><div class="h-12 bg-gray-200 rounded-lg w-full mb-2"></div><div class="h-10 bg-gray-200 rounded-lg w-full"></div></div>',2),ce=[ie],De=L({__name:"ProductCardSkeleton",setup(M){return(I,a)=>(i(),c("div",le,ce))}}),ue={class:"fixed inset-0 z-50 flex items-center justify-center p-4"},de={class:"relative bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},ye={class:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-blue-500"},pe={class:"text-lg font-semibold text-white"},he={class:"flex-1 overflow-auto"},ge={class:"w-full"},me={class:"sticky top-0 bg-white z-10"},fe={class:"border-b border-gray-200"},be=s("th",{class:"p-4 text-left w-32 bg-gray-50"},[s("span",{class:"text-sm font-medium text-gray-500"},"規格項目")],-1),_e={class:"relative"},ve=["onClick"],xe=["src","alt"],ke={key:0,class:"text-xs text-gray-500 mb-1"},we=["title"],$e={class:"p-4 text-sm font-medium text-gray-600 bg-gray-50"},Ce={class:"sticky bottom-0 bg-white border-t border-gray-200"},Me=s("td",{class:"p-4 bg-gray-50"},null,-1),Ie=["href"],Ve={class:"p-4 bg-gray-50 border-t border-gray-200 text-xs text-gray-500"},ze={class:"flex items-center gap-4"},Ne={class:"flex items-center gap-1"},Ee=L({__name:"CompareModal",props:{products:{}},emits:["close","remove"],setup(M,{emit:I}){const a=M,b=I,k=e=>new Intl.NumberFormat("zh-TW").format(e),_=e=>{const r=e.original_price;return!r||r<=e.price?null:Math.round((1-e.price/r)*100)},v=e=>{const r=e.daily_capacity??0;return r===0?null:Math.round(e.price/r)},w=e=>{const r=v(e);return r===null?"-":`$${k(r)} 元/1L除濕力`},T=u(()=>{const e=a.products;if(e.length===0)return{};const r=e.map(l=>l.price),o=e.map(l=>l.daily_capacity??0).filter(l=>l>0),t=e.map(l=>l.noise_level??99).filter(l=>l<99),n=e.map(l=>_(l)??0).filter(l=>l>0),y=e.map(l=>v(l)).filter(l=>l!==null);return{lowestPrice:Math.min(...r),highestCapacity:o.length>0?Math.max(...o):null,lowestNoise:t.length>0?Math.min(...t):null,highestDiscount:n.length>0?Math.max(...n):null,lowestCpValue:y.length>0?Math.min(...y):null}}),H=e=>a.products.some(r=>{switch(e){case"price":return!0;case"original_price":return r.original_price&&r.original_price>r.price;case"discount":return _(r)!==null;case"daily_capacity":return r.daily_capacity!==null;case"value":return r.daily_capacity!==null;case"tank_capacity":return r.tank_capacity!==null;case"noise_level":return r.noise_level!==null;case"power_consumption":return r.power_consumption!==null;case"energy_efficiency":return r.energy_efficiency!==null;default:return!1}}),V=[{key:"price",label:"促銷價",format:e=>`NT$ ${k(e.price)}`},{key:"original_price",label:"市售價",format:e=>e.original_price?`NT$ ${k(e.original_price)}`:"-"},{key:"discount",label:"折扣",format:e=>{const r=_(e);return r?`-${r}%`:"-"}},{key:"daily_capacity",label:"日除濕量",format:e=>e.daily_capacity?`${e.daily_capacity} L`:"-"},{key:"value",label:"CP值（越低越划算）",format:w},{key:"tank_capacity",label:"水箱容量",format:e=>e.tank_capacity?`${e.tank_capacity} L`:"-"},{key:"noise_level",label:"噪音值",format:e=>e.noise_level?`${e.noise_level} dB`:"-"},{key:"power_consumption",label:"消耗功率",format:e=>e.power_consumption?`${e.power_consumption} W`:"-"},{key:"energy_efficiency",label:"能源效率",format:e=>{const r=["","一級能效","二級能效","三級能效","四級能效","五級能效"];return e.energy_efficiency?r[e.energy_efficiency]:"-"}}],f=u(()=>V.filter(e=>H(e.key))),z=(e,r)=>{const o=T.value;return r==="price"?e.price===o.lowestPrice:r==="daily_capacity"?o.highestCapacity!==null&&(e.daily_capacity??0)===o.highestCapacity:r==="noise_level"?o.lowestNoise!==null&&(e.noise_level??99)===o.lowestNoise:r==="discount"?o.highestDiscount!==null&&_(e)===o.highestDiscount:r==="value"?o.lowestCpValue!==null&&v(e)===o.lowestCpValue:!1},$=e=>{const r=e.brand;if(r&&r!=="Other")return r;const o=e.name.match(/【([^】]+)】/);return o?o[1]:""};return(e,r)=>(i(),c("div",ue,[s("div",{class:"absolute inset-0 bg-black/50",onClick:r[0]||(r[0]=o=>b("close"))}),s("div",de,[s("div",ye,[s("h2",pe," 商品比較 ("+d(e.products.length)+"/4) ",1),s("button",{onClick:r[1]||(r[1]=o=>b("close")),class:"text-white/80 hover:text-white"},[h(m(q),{size:24})])]),s("div",he,[s("table",ge,[s("thead",me,[s("tr",fe,[be,(i(!0),c(N,null,S(e.products,o=>(i(),c("th",{key:o.id,class:"p-4 text-center min-w-[180px]"},[s("div",_e,[s("button",{class:"absolute -top-1 -right-1 p-1 text-gray-400 hover:text-red-500",onClick:t=>b("remove",o.id)},[h(m(q),{size:16})],8,ve),s("img",{src:o.image_url,alt:o.name,class:"w-20 h-20 object-cover rounded-lg mx-auto mb-2"},null,8,xe),$(o)?(i(),c("p",ke,d($(o)),1)):g("",!0),s("p",{class:"font-medium text-gray-900 text-xs line-clamp-2 leading-tight",title:o.name},d(o.name),9,we)])]))),128))])]),s("tbody",null,[(i(!0),c(N,null,S(f.value,o=>(i(),c("tr",{key:o.key,class:"border-b border-gray-100 hover:bg-gray-50"},[s("td",$e,d(o.label),1),(i(!0),c(N,null,S(e.products,t=>(i(),c("td",{key:t.id,class:"p-4 text-center"},[s("span",{class:x(["inline-flex items-center gap-1",z(t,o.key)?"text-green-600 font-semibold":"text-gray-900"])},[z(t,o.key)?(i(),A(m(F),{key:0,size:14,class:"text-yellow-500"})):g("",!0),C(" "+d(o.format(t)),1)],2)]))),128))]))),128))]),s("tfoot",Ce,[s("tr",null,[Me,(i(!0),c(N,null,S(e.products,o=>(i(),c("td",{key:o.id,class:"p-4 text-center"},[s("a",{href:o.affiliate_url,target:"_blank",rel:"noopener noreferrer nofollow",class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors"},[C(" 前往購買 "),h(m(G),{size:14})],8,Ie)]))),128))])])])]),s("div",Ve,[s("div",ze,[s("span",Ne,[h(m(F),{size:12,class:"text-yellow-500"}),C(" 表示該項目為最佳值 ")])])])])]))}});export{Le as A,je as C,Be as F,X as G,U as H,qe as S,q as X,Ee as _,Pe as a,De as b,Ae as c,Fe as d};
