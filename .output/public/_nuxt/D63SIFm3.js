import{u as R,a as W,D as z,_ as A,E as M}from"./B-JPyR6b.js";import{d as q,w as O,u as G,c as u,a as J,b as i,o as l,e,f as m,g as p,t as a,h as _,i as f,H as K,j as v,F as T,r as V,k as Q,l as U,n as j}from"./BNntdZSI.js";import{u as X}from"./DACjnxjQ.js";import{u as Y}from"./Bm2a0pGF.js";import{F as Z,a as ee,S as te,W as se,C as B}from"./BY7LyhAS.js";import{S as ae}from"./2UFfqf3i.js";const oe={key:0,class:"min-h-screen bg-gray-50 flex items-center justify-center"},re=e("div",{class:"text-center"},[e("p",{class:"text-gray-500"},"載入中...")],-1),le=[re],ne={key:1,class:"min-h-screen bg-gray-50"},ie={class:"bg-white border-b border-gray-200 sticky top-0 z-40"},ce={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ue={class:"flex items-center justify-between h-16"},de=e("span",{class:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent"},"比比看",-1),me={class:"text-sm text-gray-500 hidden sm:inline"},_e=e("span",{class:"hidden sm:inline text-sm"},"分享",-1),ge={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},he={class:"mb-6"},ve={class:"flex items-center gap-2 text-sm"},xe={class:"text-gray-900 font-medium truncate max-w-[200px]"},pe={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},fe={class:"md:flex"},be={class:"md:w-2/5 relative"},ye={class:"aspect-square bg-gray-100"},we=["src","alt"],ke={key:0,class:"absolute top-4 right-4 bg-red-500 text-white text-sm font-bold px-3 py-1 rounded-full"},Ce={class:"md:w-3/5 p-6"},$e={key:0,class:"text-gray-500 mb-1"},Ne={class:"text-xl md:text-2xl font-bold text-gray-900 mb-4"},Se={class:"mb-6"},ze={key:0,class:"mb-2"},Te=e("span",{class:"text-sm text-gray-500"},"市售價 ",-1),Ve={class:"text-lg text-gray-400 line-through"},je={class:"flex items-baseline gap-2"},Be=e("span",{class:"text-sm text-gray-500"},"促銷價",-1),De={class:"text-3xl font-bold text-blue-600"},Fe={key:1,class:"text-red-500 text-sm mt-1"},Pe={class:"space-y-3 mb-6"},Ee={class:"text-gray-600"},Ie={class:"font-medium text-gray-900"},He=["href"],Le={class:"mt-8 bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},Re=e("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"詳細規格",-1),We={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ae={class:"text-gray-600"},Me={class:"font-medium text-gray-900"},qe={class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 md:hidden z-40"},Oe={class:"flex items-center justify-between gap-4"},Ge=e("p",{class:"text-sm text-gray-500"},"促銷價",-1),Je={class:"text-xl font-bold text-blue-600"},Ke=["href"],Qe=e("footer",{class:"bg-white border-t border-gray-200 mt-16 pb-24 md:pb-0"},[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},[e("div",{class:"text-center text-gray-500 text-sm"},[e("p",null,"© 2025 比比看. 本站包含聯盟行銷連結。"),e("p",{class:"mt-1"},"價格與規格僅供參考，請以官方公告為準。")])])],-1),at=q({__name:"[slug]",async setup(Ue){var $,N,S;let b,y;[b,y]=O(()=>R()),await b,y();const w=G(),g=u(()=>w.params.category),D=u(()=>w.params.slug),{getProductBySlug:F}=W(),{getCategoryConfig:P,formatSpecValue:E}=Y(),t=u(()=>F(D.value)),h=u(()=>P(g.value));if(!t.value)throw J({statusCode:404,statusMessage:"找不到此商品",fatal:!0});const d=s=>new Intl.NumberFormat("zh-TW").format(s),k=u(()=>{if(!t.value)return null;const s=t.value.original_price,n=t.value.price;if(!s||s<=n)return null;const c=Math.round((1-n/s)*100);return c>=5?c:null}),o=u(()=>{if(!t.value)return null;const s=t.value.original_price;return!s||s<=t.value.price?null:s-t.value.price}),x=u(()=>{if(!t.value)return"";const s=t.value.brand;if(s&&s!=="Other")return s;const n=t.value.name.match(/【([^】]+)】/);return n?n[1]:""}),I=async()=>{if(!t.value)return;const s={title:t.value.name,text:`${t.value.name} - NT$ ${d(t.value.price)}`,url:window.location.href};if(navigator.share)try{await navigator.share(s)}catch{}else await navigator.clipboard.writeText(window.location.href),alert("已複製連結！")},C=u(()=>!h.value||!t.value?[]:h.value.specs.filter(s=>s.showInDetail).map(s=>{var c;const n=((c=t.value.specs)==null?void 0:c[s.key])??t.value[s.key];return{...s,value:n,formattedValue:E(g.value,s.key,n)}}).filter(s=>s.value!==null&&s.value!==void 0));X({title:`${(($=t.value)==null?void 0:$.name)||""} | 比比看`,meta:[{name:"description",content:`${(N=t.value)==null?void 0:N.name} - NT$ ${d(((S=t.value)==null?void 0:S.price)||0)}，查看詳細規格與最新優惠價格。`}]});const H={dehumidifier:z,"air-purifier":se,"air-conditioner":te,heater:ee,fan:Z},L=u(()=>H[g.value]||z);return(s,n)=>{const c=A;return t.value?(l(),i("div",ne,[e("header",ie,[e("div",ce,[e("div",ue,[m(c,{to:"/",class:"flex items-center gap-2"},{default:p(()=>{var r;return[de,e("span",me,a((r=h.value)==null?void 0:r.name),1)]}),_:1}),e("button",{class:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",onClick:I},[m(_(ae),{size:18}),_e])])])]),e("main",ge,[e("nav",he,[e("div",ve,[m(c,{to:"/",class:"flex items-center gap-1 text-gray-500 hover:text-blue-600 transition-colors"},{default:p(()=>[m(_(K),{size:14}),f(" 首頁 ")]),_:1}),m(_(B),{size:14,class:"text-gray-300"}),m(c,{to:`/${g.value}`,class:"text-gray-500 hover:text-blue-600 transition-colors"},{default:p(()=>{var r;return[f(a((r=h.value)==null?void 0:r.name),1)]}),_:1},8,["to"]),m(_(B),{size:14,class:"text-gray-300"}),e("span",xe,a(x.value||t.value.model),1)])]),e("div",pe,[e("div",fe,[e("div",be,[e("div",ye,[e("img",{src:t.value.image_url,alt:t.value.name,class:"w-full h-full object-cover"},null,8,we),k.value?(l(),i("span",ke," -"+a(k.value)+"% ",1)):v("",!0)])]),e("div",Ce,[x.value?(l(),i("p",$e,a(x.value),1)):v("",!0),e("h1",Ne,a(t.value.name),1),e("div",Se,[t.value.original_price&&t.value.original_price>t.value.price?(l(),i("div",ze,[Te,e("span",Ve,"NT$ "+a(d(t.value.original_price)),1)])):v("",!0),e("div",je,[Be,e("span",De,"NT$ "+a(d(t.value.price)),1)]),o.value&&o.value>=500?(l(),i("p",Fe," 現省 NT$ "+a(d(o.value)),1)):v("",!0)]),e("div",Pe,[(l(!0),i(T,null,V(C.value,r=>(l(),i("div",{key:r.key,class:"flex items-center gap-3"},[(l(),Q(U(L.value),{size:20,class:"text-gray-400"})),e("span",Ee,a(r.label)+"：",1),e("span",Ie,a(r.formattedValue),1)]))),128))]),e("a",{href:t.value.affiliate_url,target:"_blank",rel:"noopener noreferrer nofollow",class:j(["inline-flex items-center justify-center gap-2 w-full md:w-auto px-8 py-4 font-medium rounded-xl transition-all duration-200 shadow-sm hover:shadow",o.value&&o.value>=500?"bg-gradient-to-r from-red-600 to-orange-500 hover:from-red-700 hover:to-orange-600 text-white":"bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white"])},[m(_(M),{size:20}),f(" "+a(o.value&&o.value>=500?`現省 $${d(o.value)} - 立即搶購`:"查看優惠價"),1)],10,He)])])]),e("div",Le,[Re,e("div",We,[(l(!0),i(T,null,V(C.value,r=>(l(),i("div",{key:r.key,class:"flex justify-between py-3 border-b border-gray-100 last:border-b-0"},[e("span",Ae,a(r.label),1),e("span",Me,a(r.formattedValue),1)]))),128))])])]),e("div",qe,[e("div",Oe,[e("div",null,[Ge,e("p",Je,"NT$ "+a(d(t.value.price)),1)]),e("a",{href:t.value.affiliate_url,target:"_blank",rel:"noopener noreferrer nofollow",class:j(["flex-1 text-center py-3 px-6 font-medium rounded-xl",o.value&&o.value>=500?"bg-gradient-to-r from-red-600 to-orange-500 text-white":"bg-blue-600 text-white"])},a(o.value&&o.value>=500?`省$${d(o.value)}`:"查看優惠"),11,Ke)])]),Qe])):(l(),i("div",oe,le))}}});export{at as default};
